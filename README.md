# Recipit

![image](https://github.com/dpS1lence/Recipit/assets/68961310/6e4a2c37-8d53-4338-a5a1-76005e515287)


![Animation2](https://github.com/dpS1lence/Recipit/assets/68961310/ea718892-62f2-4b48-b34c-81429027a22a)

![Animation](https://github.com/dpS1lence/Recipit/assets/68961310/80239da6-fa98-48d3-b786-0e714b92796e)

![Animation3](https://github.com/dpS1lence/Recipit/assets/68961310/7c7f7344-99cb-46e0-b085-286dbb6f2f6d)

![Animation4](https://github.com/dpS1lence/Recipit/assets/68961310/ef541611-09de-4c13-b758-75e6a219862c)
![Animation5](https://github.com/dpS1lence/Recipit/assets/68961310/8e49c556-20f6-475e-8752-3fd0766809bf)
![Animation6](https://github.com/dpS1lence/Recipit/assets/68961310/2e7b8990-6d98-4727-823a-546e6bf458b9)

![image](https://github.com/dpS1lence/Recipit/assets/68961310/e77679e9-d1fb-498d-8149-4124e11a562b)

**Природо-математическа гимназия „Васил Друмев“**

**ДИПЛОМЕН ПРОЕКТ**


## Тема


## “Уебсайт на инфлуенсър с рецепти за здравословно хранене”


<table>
  <tr>
   <td><strong>Дипломант:</strong>
<p>
Давид Емилиянов Петков
<p>
Специалност: “Професия Проложен Програмист”
   </td>
   <td><strong>Ръководител-консултант:</strong>
<p>
Георги Игнатов
   </td>
  </tr>
</table>



## Съдържание





1. 
Въведение
В днешното дигитално общество все повече хора се обръщат към интернет за информация и ресурси, свързани с храна и здравословно хранене. Инфлуенсърите, специализирани в тази област, играят важна роля, като предоставят на своите последователи ценни съвети, рецепти и идеи.

Този дипломен проект е посветен на разработването на уеб сайт за инфлуенсър, занимаващ се със здравословно хранене. Сайтът ще служи като платформа за:



* **Публикуване на рецепти**: Инфлуенсърът ще може да добавя, редактира и изтрива рецепти, както и да им прикачва изображения и хранителна информация.
* **Споделяне на знания**: Сайтът ще предлага статии, съвети и друга информация, свързана със здравословното хранене.
* **Взаимодействие с аудиторията**: Последователите ще могат да коментират рецепти, дават оценки и да се свързват с инфлуенсъра.

Уеб сайтът е разработен с ASP.NET MVC и използва следните технологии:



* **Entity Framework**: За работа с база данни.
* **jQuery**: За динамично зареждане на съдържание и асинхронна комуникация със сървъра.
* **Google Search API**: За намиране на изображения на продукти.
* **Imgur API**: За качване и съхранение на изображения.
* **AutoMapper**: За автоматично преобразуване на модели от един тип в друг.
* **Health Checks**: За наблюдение на работоспособността на приложението.
* **Razor Pages**: За генериране на HTML код от C# код.
* **Pagination**: За разделяне на големи набори от данни на страници.
* **Database Middleware**: За повишаване на устойчивостта на базата данни.
* **Serilog**: За по-обогатена обратна връзка от страна на сървъра в конзолата.


## Цели на проекта

Основните цели на проекта са:



* **Създаване на функционален и атрактивен уеб сайт**: Сайтът ще е лесен за навигация и ще предлага богато съдържание, полезно за инфлуенсъра и неговите последователи.
* **Осигуряване на добра производителност**: Сайтът ще е бърз и надежден, дори при голям брой посетители.
* **Използване на съвременни технологии**: Сайтът ще е разработен с нови технологии, за да се гарантира неговата гъвкавост, разширяемост и сигурност.


## Структура на документацията

Документацията е разделена на три части:



* **Теоретична част**: Описание на използваните технологии.
* **Практическа част**: Описание на функционалностите на сайта.
* **Заключение**: Обобщение на постигнатите резултати.


## Очаквани резултати

Очаква се сайтът да:



* **Повиши видимостта на инфлуенсъра**: Сайтът ще му осигури платформа, за да достигне до по-широка аудитория.
* **Увеличи ангажираността на аудиторията**: Сайтът ще предостави на последователите на инфлуенсъра нови начини за взаимодействие с него.
* **Стане ценен ресурс за здравословно хранене**: Сайтът ще предложи на своите посетители богата информация и полезни съвети.


### Serilog

Serilog е библиотека за водене на записи (logging) в .NET приложения, която предлага богати възможности за структурирано водене на записи. В отличие от традиционните библиотеки за водене на записи, които използват форматирани текстови съобщения, Serilog позволява на разработчиците да работят със съобщения като структурирани данни. Това означава, че може да се включат комплексни обекти и структури данни в записите, което улеснява тяхното анализиране и обработка.

Основни характеристики на Serilog включват:



* **Структурирано водене на записи**: Вместо да се разчита на прости текстови съобщения, Serilog позволява воденето на записи като структурирани данни, които могат лесно да бъдат филтрирани, търсени и анализирани.
* **Богат избор на изходи (sinks)**: Serilog предлага широка гама от "изходи" (sinks), които позволяват на записите да бъдат изпращани до различни места за съхранение и анализ, като например файлове, конзоли, бази данни, системи за управление на записи (като ELK stack или Seq) и др.
* **Лесна интеграция**: Serilog може лесно да бъде интегриран във всяко .NET приложение, включително ASP.NET Core, с минимална конфигурация.
* **Enrichers**: Позволява обогатяването на записите с допълнителна контекстуална информация, като например потребителски идентификатори, версия на приложението и др., което улеснява откриването на проблеми.


#### Предимства на използването на Serilog



1. **Подобряване на анализируемостта на записите**: Структурираните записи могат лесно да бъдат анализирани и обработвани с помощта на инструменти за анализ на логове, което улеснява откриването на проблеми и грешки в приложението.
2. **Гъвкавост в съхранението на записите**: Благодарение на множеството поддържани изходи, Serilog позволява записите да бъдат съхранявани в различни формати и на различни места, в зависимост от нуждите на приложението.
3. **Лесна интеграция и конфигурация**: Serilog може лесно да бъде добавен и конфигуриран във всяко .NET приложение, което го прави достъпен за разработчици на всички нива.
4. **Обогатяване на записите с контекстуална информация**: Възможността за добавяне на допълнителна информация към записите помага за по-доброто разбиране на контекста на грешките и поведението на приложението.


### Database Middleware и CreateRetryPolicy: Теория и Концепция


#### Database Middleware

В контекста на ASP.NET Core и други уеб фреймуърки, терминът "middleware" се отнася до софтуер, който се изпълнява между входящите заявки към сървъра и изходящите отговори от него. **Database Middleware** може да бъде разгледан като слой, който управлява взаимодействията между приложението и базата данни, предоставяйки допълнителни функционалности като управление на транзакции, логиране на заявки към базата данни, автоматично повторно опитване при неуспешни операции и др.

Този подход позволява централизирано управление на общи задачи свързани с базата данни, улеснявайки разработката и поддържането на приложението.


#### CreateRetryPolicy: Концепция за Повторен Опит при Грешки

`CreateRetryPolicy` е функция, която създава и конфигурира политика за повторен опит (retry policy) при извършване на операции, които могат да срещнат временни проблеми или грешки. В контекста на бази данни, това е особено полезно за управление на временни проблеми като загуба на мрежова връзка, преовърлод на сървъра или блокиране на транзакции.

Политиката за повторен опит обикновено включва следните аспекти:



* **Максимален брой опити**: Определя колко пъти операцията да бъде повторена преди окончателно да бъде счетена за неуспешна.
* **Интервал между опитите**: Времето за изчакване между последователните опити.
* **Условия за повторен опит**: Определя при какви условия (какви типове грешки) да се извърши повторен опит.

В предоставения код, `CreateRetryPolicy` се използва за създаване на политика, която управлява повторните опити за миграция на базата данни. Тази политика е особено полезна при стартиране на приложението, когато може да има временни проблеми с достъпа до базата данни. Използването на **Circuit Breaker** патерна позволява временно "изключване" на опитите за връзка при неколкократно неуспешни опити, предотвратявайки натоварването на базата данни или мрежата и дава възможност за автоматично възстановяване при подобрение на състоянието.


#### Circuit Breaker

Circuit Breaker е шаблон за проектиране, който предотвратява изпращането на заявки към услуга или ресурс, който е вероятно да срещне грешка. Това се постига чрез "прекъсване" на веригата (схемата) на заявките при откриване на определен брой последователни грешки, и автоматично "възстановяване" след определен период на време. Този патерн е особено полезен в микросервисни архитектури и разпределени системи, където временните неуспехи могат значително да повлияят на общата надеждност и производителност на системата.



2. 
Теоретична част

## Технологии


### ASP.NET MVC

ASP.NET MVC е платформа за уеб разработка, създадена от Microsoft. Тя е базирана на Model-View-Controller (MVC) архитектурния шаблон, който разделя приложението на три основни компонента:



* **Model**: Моделът представлява данните на приложението.
* **View**: Изгледът е отговорен за визуализацията на данните.
* **Controller**: Контролерът е посредник между модела и изгледа. Той обработва HTTP заявки и генерира отговори.

ASP.NET MVC е отворен код и е безплатен за използване. Той е популярен избор за разработване на уеб приложения, поради следните предимства:



* **Лесен за разбиране и използване**: MVC архитектурният шаблон е лесен за разбиране, което прави ASP.NET MVC лесен за изучаване и използване.
* **Разширяем**: ASP.NET MVC е много разширяема платформа. Разработчиците могат да създават свои собствени модули, компоненти и помощни програми, за да разширят функционалността на приложението.
* **Мощен**: ASP.NET MVC е мощен инструмент, който може да се използва за разработване на сложни уеб приложения.

**Основни компоненти на ASP.NET MVC**



* **Models**: Моделите са класове, които представляват данните на приложението. Те обикновено се дефинират като C# класове.
* **Views**: Изгледите са HTML файлове, които дефинират как ще се визуализират данните. Те могат да съдържат Razor синтаксис, който позволява динамично генериране на HTML код.
* **Controllers**: Контролерите са C# класове, които обработват HTTP заявки. Те взаимодействат с моделите, за да извлекат данни, и с изгледите, за да генерират отговори.

**Пълен цикъл на ASP.NET MVC**



1. **Потребителят изпраща HTTP заявка към приложението.**
2. **ASP.NET MVC маршрутизира заявката към контролер и метод за действие.**
3. **Методът за действие изпълнява код, за да обработи заявката.**
4. **Методът за действие може да извлече данни от модели.**
5. **Методът за действие може да генерира HTML код, използвайки Razor синтаксис.**
6. **ASP.NET MVC връща HTML код на потребителя.**

**ASP.NET MVC Routing**

ASP.NET MVC Routing е система, която съпоставя URL адреси с контролери и методи за действие. Routing е конфигуриран в Global.asax файл.

**ASP.NET MVC Razor**

Razor е синтаксис за генериране на HTML код от C# код. Razor синтаксисът се използва в изгледите.

**ASP.NET MVC Helpers**

ASP.NET MVC Helpers са методи, които улесняват генерирането на HTML код. Helpers са дефинирани в System.Web.Mvc namespace.

**ASP.NET MVC Bundling and Minification**

ASP.NET MVC Bundling and Minification е функция, която комбинира и компресира JavaScript и CSS файлове. Bundling and Minification може да подобри производителността на приложението.

**ASP.NET MVC Dependency Injection**

ASP.NET MVC Dependency Injection е функция, която позволява на разработчиците да инжектират зависимости в контролери и други компоненти. Dependency Injection може да направи кода по-тестваем и модулен.


### Entity Framework

Entity Framework е ORM (Object-Relational Mapping) фреймуърк, който е разработен от Microsoft. Той позволява на разработчиците да работят с релационни бази данни, използвайки обектно-ориентиран подход.

**Основни характеристики на Entity Framework:**



* **ORM**: Entity Framework е ORM фреймуърк, което означава, че той автоматично преобразува обекти в релационни таблици и обратно.
* **LINQ**: Entity Framework поддържа LINQ (Language Integrated Query), което позволява на разработчиците да изпитват данни от релационни бази данни, използвайки C# синтаксис.
* **Code First**: Entity Framework поддържа Code First подход, което позволява на разработчиците да дефинират моделите си като C# класове, а след това да генерират база данни от тях.
* **Migrations**: Entity Framework поддържа миграции, които позволяват на разработчиците да променят структурата на базата данни с течение на времето.

**Пълен цикъл на Entity Framework:**



1. **Разработчикът дефинира моделите си като C# класове.**
2. **Entity Framework генерира база данни от моделите.**
3. **Разработчикът добавя данни към базата данни, използвайки C# код.**
4. **Разработчикът извлича данни от базата данни, използвайки LINQ.**
5. **Entity Framework автоматично преобразува данни между обекти и релационни таблици.**

**Entity Framework Code First**

Entity Framework Code First е подход, при който разработчикът дефинира моделите си като C# класове, а след това Entity Framework генерира база данни от тях.

**Entity Framework Migrations**

Entity Framework Migrations е функция, която позволява на разработчиците да променят структурата на базата данни с течение на времето. Migrations са автоматично генерирани от Entity Framework.

**Entity Framework Data Annotations**

Entity Framework Data Annotations са атрибути, които се използват за дефиниране на метаданни за модели. Metadata може да се използва за валидиране на данни, за конфигуриране на мапиране на обекти-релации и др.

**Entity Framework Relationships**

Entity Framework Relationships са връзки между модели. Entity Framework поддържа различни типове връзки, като например едно към едно, едно към много и много към много.

**Entity Framework Transactions**

Entity Framework Transactions са групи от операции, които се изпълняват като един блок. Transactions са гарантирани да бъдат атомарни, последователни, изолирани и устойчиви (ACID).


### jQuery

jQuery е бърза, малка и богата на функции JavaScript библиотека. Тя улеснява обхождането и манипулирането на HTML документите, обработката на събития, анимацията и Ajax взаимодействията за бърза уеб разработка. jQuery е проектирана да улесни скриптирането на клиентската страна на HTML, като същевременно поддържа съвместимостта между различните браузъри.

Основни характеристики на jQuery включват:



* **DOM манипулация**: Улеснява селектирането, модификацията и извличането на елементи от DOM дървото.
* **Обработка на събития**: Предоставя лесен интерфейс за прикачване на обработчици към събития.
* **Анимации и ефекти**: Включва вградени функции за добавяне на анимации и ефекти към уеб елементи.
* **Ajax**: Упрощава използването на Ajax за асинхронно извличане на данни от сървъра.

#### 
    Предимства на използването на jQuery

1. **Улесняване на JavaScript кода**: jQuery значително намалява количеството код, необходимо за изпълнение на често срещани задачи.
2. **Съвместимост с браузъри**: Автоматично решава много от проблемите със съвместимостта на различните браузъри.
3. **Лесен за използване**: Синтаксисът на jQuery е проектиран да е лесен за разбиране и използване.
4. **Богата екосистема**: Има голямо количество плъгини, които разширяват функционалността на jQuery.

#### 
    Приложение на jQuery в проекта


В контекста на разработвания уеб сайт за инфлуенсър в областта на здравословното хранене, jQuery се използва за разнообразни задачи, които улесняват взаимодействието на потребителя с интерфейса и подобряват потребителското изживяване.


##### 
    **Специфични логически операции:**



1. **Динамично добавяне на рецепти**: jQuery се използва за динамично добавяне на рецепти на страницата без необходимостта от презареждане. С Ajax заявки, потребителите могат да добавят и разглеждат рецепти асинхронно.
2. **Анимации при преходи**: При преходи между различни секции на сайта, jQuery анимации добавят гладки и привлекателни визуални ефекти, които подобряват визуалното преживяване.
3. **Обработка на събития на форми**: jQuery се използва за валидиране на форми преди те да бъдат изпратени към сървъра. Това включва проверка на въведените данни за калории, оценки и други входни полета.
4. **Pagination и филтрация на рецепти**: За управление на пагинацията и филтрирането на рецептите, jQuery улеснява динамичното променяне на съдържанието, позволявайки на потребителите да персонализират това, което виждат на екрана си, без цялата страница да се презарежда.

jQuery играе важна роля в оптимизирането на клиентската част на приложението, предлагайки гъвкави решения за улесняване на интерактивността и подобряване на потребителското изживяване чрез ефективна и елегантна манипулация на DOM и обработка на събития.


### AutoMapper

AutoMapper е библиотека за .NET, която позволява автоматично мапиране между два обекта. Това означава, че AutoMapper може да прехвърли данни от един обект в друг, базирайки се на тяхната конфигурация и структура, автоматизирайки процеса, който в противен случай би изисквал ръчно присвояване на стойности между свойствата на двата обекта. Основната цел на AutoMapper е да намали количеството код, необходим за прехвърляне на данни, като по този начин улеснява поддръжката и четимостта на кода.

AutoMapper предлага разширена конфигурация, която позволява фин настройка на процеса на мапиране. Това включва:



* **Конвенционално мапиране**: AutoMapper може автоматично да мапира свойства между обекти, които споделят същите имена и типове на данни.
* **Комплексно мапиране**: Когато свойствата на обектите не съвпадат директно, AutoMapper позволява дефинирането на кастом мапиране, където може да се определи конкретна логика за прехвърляне на данни.
* **Мапиране на колекции**: AutoMapper може да управлява мапирането на списъци и други колекции, автоматизирайки прехвърлянето на данни между елементите на тези колекции.
* **Профили на мапиране**: Позволява организирането на мапирането в отделни профили, което улеснява управлението на мапирането в големи и сложни приложения.

#### 
    Предимства на използването на AutoMapper

1. **Намаляване на бойлерплейт кода**: Автоматизирането на прехвърлянето на данни между обекти значително намалява количеството ръчно написан код.
2. **Подобряване на поддръжката на кода**: Промените в моделите изискват по-малко усилия за актуализация на мапингите.
3. **Увеличаване на продуктивността**: Разработчиците могат да се фокусират върху по-важни аспекти на приложението, вместо да пишат и поддържат код за мапиране.

#### 
    Приложение на AutoMapper в проекта


В контекста на разработвания уеб сайт, AutoMapper се използва за ефикасно прехвърляне на данни между слоевете на приложението - от моделите на базата данни до DTOs (Data Transfer Objects) и обратно. Това е особено полезно при извличането и показването на рецепти, коментари, и информация за потребителите, където структурите на данни често се различават между представянето в базата данни и нуждите на потребителския интерфейс.


##### 
    **Специфични логически операции:**



1. **Мапиране на рецепти**: При показване на рецепта, AutoMapper трансформира данните от базата данни в DTO, който включва информация за рецептата, автора и калоричната стойност. Това позволява лесното включване и промяна на данни, без да се налага ръчно присвояване на стойности.
2. **Мапиране на потребителски профили**: При редактиране на потребителски профили, AutoMapper облекчава процеса, като автоматично прехвърля промените между потребителските форми и моделите на базата данни.
3. **Автоматизация при добавяне на продукти**: Когато потребител добавя нов продукт, AutoMapper използва кастом мапиране за прехвърляне на данните от формата на уебсайта към модела на продукта в базата данни, включително калоричната стойност и името на продукта.

AutoMapper играе ключова роля в оптимизирането на кода и подобряването на поддръжката на приложението, като намалява необходимостта от ръчно присвояване на стойности и улеснява рефакторинга на кода при промени в структурите на данните.

**Пример за AutoMapper:**


```
public class Person
{
  public string Name { get; set; }
  public int Age { get; set; }
}

public class PersonDto
{
  public string FullName { get; set; }
  public int Age { get; set; }
}

// Дефиниране на профил за AutoMapper
public class PersonProfile : Profile
{
  public PersonProfile()
  {
	CreateMap<Person, PersonDto>()
  	.ForMember(dest => dest.FullName, opt => opt.MapFrom(src => src.Name + " " + src.Age));
  }
}

// Използване на AutoMapper
var person = new Person { Name = "John", Age = 30 };
var personDto = AutoMapper.Mapper.Map<PersonDto>(person);

Console.WriteLine(personDto.FullName); // "John 30"
```



### Razor Pages

Razor Pages са част от ASP.NET Core и представляват лесен и ефективен начин за създаване на уеб страници. Те комбинират HTML разметка с C# код в един файл, което улеснява разработката и поддръжката на уеб приложенията. Вместо да разделят логиката и представянето на данните между контролери и изгледи, както е при традиционните ASP.NET MVC приложения, Razor Pages позволяват разработчиците да групират кода, свързан с дадена страница, на едно място.

Когато се създава Razor Page, файлът има разширение `.cshtml` и съдържа както HTML разметка, така и C# код. Тази комбинация позволява на разработчиците да работят с уеб страници, като използват познатия синтаксис на HTML, докато същевременно имат достъп до цялата мощ на C# и .NET Framework.

Разработчиците могат да използват Razor Pages за реализиране на различни функционалности в уеб приложенията си, включително показване на списъци с данни, форми за въвеждане на информация, обработка на заявки от потребителите и други. Освен това, Razor Pages позволяват лесно прехвърляне на данни от моделите към изгледите и обратно, което улеснява работата с данните и подобрява производителността на приложението.

Основните ползи от използването на Razor Pages включват:



1. **Лесен за използване синтаксис**: Разработчиците могат да използват познатият синтаксис на HTML за създаване на уеб страници, като в същото време имат достъп до мощните възможности на C# и .NET Framework.
2. **Групиране на кода**: Razor Pages позволяват на разработчиците да групират целия код, свързан с дадена страница, на едно място, което улеснява разбирането и поддръжката на приложенията.
3. **Избягване на сложни конфигурации**: Вместо да се занимават с конфигурацията на маршрути и контролери, както е при традиционните ASP.NET MVC приложения, разработчиците могат да съсредоточат усилията си върху създаването на уеб страници чрез Razor Pages.
4. **Подобрена производителност**: Razor Pages позволяват ефективно прехвърляне на данни между моделите и изгледите, което подобрява производителността на уеб приложенията.


### Pagination

Pagination, или странициране, е процесът на разделяне на съдържанието на уеб страница на отделни "страници", което улеснява навигацията и подобрява потребителското изживяване при разглеждането на големи количества данни, като например списъци с рецепти. Целта е да се предотврати претоварването на страницата с твърде много информация едновременно, което може да затрудни потребителите и да забави зареждането на страницата.

**Основни концепти на страницирането включват:**



* Ограничаване на броя записи на страница: Предварително определен брой записи се показват на една страница. Потребителите могат да преминават към следващи или предишни страници, за да разгледат останалите записи.
* Навигационни контроли: Обикновено включва бутони или линкове за бързо преминаване към следваща, предишна, първа или последна страница, както и за преминаване към конкретна страница.
* Динамично зареждане: В някои случаи, за подобряване на производителността, съдържанието на следващите страници може да се зарежда асинхронно с помощта на Ajax.

**Предимства на използването на Pagination**



1. Подобряване на производителността: Намалява времето за зареждане на страницата, като ограничава количеството данни, които трябва да бъдат извлечени и показани наведнъж.
2. Подобряване на потребителското изживяване: Улеснява потребителите да намират и разглеждат информация, като предотвратява "претоварването" с твърде много информация.
3. По-добра организация на съдържанието: Помага за структуриране на съдържанието по начин, който е лесен за разбиране и навигация.

**Приложение на Pagination в проекта**

В контекста на разработвания уеб сайт за инфлуенсър в областта на здравословното хранене, страницирането се използва за представяне на рецептите в управляем и потребителски ориентиран формат. Това позволява на потребителите лесно да разглеждат и откриват рецепти, без да се налага да преминават през огромно количество информация наведнъж.

**Специфични логически операции:**



1. Странициране на списъка с рецепти: Рецептите се показват в ограничен брой на страница (например, 3, 5, или 7 рецепти на страница). Потребителите могат да използват навигационни контроли за да преминат към различни страници с рецепти.
2. Динамично странициране с Ajax: За подобряване на потребителското изживяване, страницирането може да се изпълнява асинхронно с Ajax, позволявайки на потребителите да зареждат нови страници с рецепти без цялата уеб страница да се презарежда.
3. Персонализиране на настройките за странициране: Потребителите могат да избират колко рецепти да се показват на страница, което им дава контрол върху това как искат да разглеждат съдържанието.

Страницирането е критичен елемент в разработката на уеб сайта, тъй като подобрява както производителността на сайта, така и общото потребителско изживяване. То позволява на потребителите да навигират през богатото съдържание на сайта по един структуриран и интуитивен начин.


### Google Search API


#### Описание и Обяснение

Google Search API позволява разработчиците да използват функционалностите на Google Търсене в своите приложения. Това може да включва извличане на резултати от търсенето в реално време, извличане на изображения, новини, карти и друга информация, достъпна чрез Google Търсене. API-то предлага гъвкави възможности за филтриране и персонализация на търсенето, което позволява на разработчиците да създадат богати и адаптивни потребителски изживявания.


#### Предимства



1. **Достъп до обширната база данни на Google**: Използването на Google Search API дава възможност за достъп до широк спектър от информация, като се използва технологията за търсене на Google.
2. **Персонализация на търсенето**: Разработчиците могат да персонализират резултатите от търсенето, като използват различни филтри и опции за търсене, за да отговорят на специфичните нужди на своите приложения.
3. **Лесна интеграция**: Google предоставя богат набор от инструменти и документация, което улеснява интеграцията на търсенето в приложения.


### Imgur API


#### Описание и Обяснение

Imgur API позволява разработчиците да качват, споделят и взаимодействат с изображения и албуми на платформата Imgur. Това API е мощен инструмент за управление на медийно съдържание, като предлага функционалности за качване на изображения от различни източници, получаване на информация за изображения и албуми, и дори вграждане на изображения в уебсайтове или мобилни приложения.


#### Предимства



1. **Улеснява управлението на медийно съдържание**: Imgur API предоставя лесен начин за качване, организиране и споделяне на изображения.
2. **Широка достъпност**: Изображенията, качени в Imgur, могат лесно да бъдат достъпни от широка аудитория, което ги прави идеални за споделяне и вграждане в различни платформи.
3. **Богат набор от функционалности**: API-то поддържа разнообразни операции, като качване на изображения, достъп до информация за изображенията и управление на албуми, което предоставя голяма гъвкавост на разработчиците.

Използването на Google Search API и Imgur API в контекста на разработката на уебсайтове и мобилни приложения може значително да обогати функционалността и потребителското изживяване, като предоставя бърз и лесен достъп до информация и медийно съдържание. Разработчиците могат да се възползват от тези API-та, за да създадат по-динамични и интерактивни приложения, които отговарят на нуждите и предпочитанията на техните потребители.


### Health Checks


#### Описание и Обяснение

Health Checks в ASP.NET Core представляват механизъм за мониторинг на състоянието на приложението и неговите зависимости в реално време. Тази функционалност позволява на разработчиците да дефинират различни проверки за важни компоненти на приложението, като бази данни, външни услуги, системни ресурси и други. Health Checks могат да се използват за автоматично откриване на проблеми в приложението, което помага за навременното им разрешаване и поддържане на висока наличност и надеждност на системата.


#### Основни Характеристики



* **Конфигурируемост**: Health Checks в ASP.NET Core са изключително конфигурируеми, което позволява на разработчиците да създават персонализирани проверки, които отговарят на специфичните нужди на тяхното приложение.
* **Разширяемост**: Разработчиците могат да добавят свои собствени проверки за любой тип зависимост или услуга, която приложението използва.
* **Интеграция с Kubernetes и други оркестратори**: Health Checks могат лесно да се интегрират с оркестратори като Kubernetes, които използват тези проверки за автоматично управление на разположението и мащабирането на приложения.


#### Предимства на използването на Health Checks



1. **Подобрена Надеждност**: Предоставя възможност за ранно откриване на проблеми в приложението и неговите зависимости, което води до по-бързо разрешаване и подобряване на общата надеждност.
2. **Лесна Интеграция с Мониторинг Системи**: Health Checks могат да бъдат лесно интегрирани с външни системи за мониторинг и алармиране, което улеснява наблюдението на състоянието на приложението.
3. **Автоматизация на Управлението на Инфраструктурата**: В комбинация с оркестратори като Kubernetes, Health Checks позволяват автоматизирано управление на разположението на приложения, включително автоматично възстановяване от сривове и мащабиране в зависимост от състоянието на приложението.


#### Реализация

ASP.NET Core предоставя вградена поддръжка за Health Checks чрез мидълуер, който може лесно да бъде добавен към конвейера на обработка на заявки. Разработчиците могат да регистрират различни health checks чрез `services.AddHealthChecks()` в `Startup.cs`, като дефинират логиката за проверка на състоянието на различни компоненти. Тези проверки могат да бъдат достъпвани чрез специално конфигуриран endpoint, което позволява лесно мониторинг на състоянието на приложението.

Health Checks в ASP.NET Core представляват ключова функционалност за разработване на надеждни и устойчиви уеб приложения, като предлагат гъвкави възможности за мониторинг и управление на здравето на приложението и неговите зависимости.


### Areas в ASP.NET Core


#### Описание и Обяснение

Areas в ASP.NET Core представляват функционалност, която позволява структурирането на голями приложения на по-малки модули или секции. Това е мощен начин за организация на проектите, като улеснява разделението на приложението на логически разграничени компоненти, като например административен панел, клиентска секция, форум и други. Всяка Area може да има собствен набор от контролери, представяния (views), модели и файлове за конфигурация, което позволява разработчиците да управляват и поддържат всяка част от приложението по-ефективно.


#### Основни Характеристики



* **Модуларност**: Areas предлагат модуларен подход към разработката на приложения, позволявайки разделението на голямо приложение на малки, управляеми части.
* **Изолация**: Компонентите в рамките на една Area са изолирани от останалата част на приложението, което улеснява разработката, тестването и поддръжката.
* **Споделяне на функционалности**: Въпреки че Areas позволяват изолация, те също така могат да споделят общи компоненти и функционалности на приложението, като общи модели, услуги и външни библиотеки.


#### Предимства на използването на Areas



1. **Подобрена Организация на Кода**: Areas помагат за поддържането на кода организиран и чист, особено в големи проекти, където управлението на множество компоненти може да бъде предизвикателство.
2. **Улесняване на Разработката в Екип**: Позволява на различни екипи да работят върху различни части на приложението независимо, което увеличава ефективността и намалява риска от конфликти в кода.
3. **Лесно Мащабиране на Приложението**: Модуларната структура улеснява добавянето на нови функционалности и разширяването на приложението с минимално въздействие върху съществуващия код.


### HTML


#### Описание и Обяснение

HTML (HyperText Markup Language) е стандартизиран маркиращ език, използван за създаване и структуриране на съдържание на уеб страниците. Той служи като костенурката на всяка уеб страница в интернет и определя основната структура и съдържание на уеб документите чрез използването на тагове. HTML таговете определят различни елементи като заглавия, параграфи, списъци, връзки, изображения и много други.


#### Основни Характеристики



* **Структура**: HTML използва тагове за определяне на структурата на документите, като например `&lt;html>`, `&lt;head>`, `&lt;body>`, `&lt;div>`, `&lt;span>`, `&lt;p>` и др.
* **Семантика**: Новите версии на HTML (HTML5) въвеждат семантични тагове като `&lt;article>`, `&lt;section>`, `&lt;nav>`, `&lt;header>`, `&lt;footer>`, които помагат за описването на смисъла на съдържанието.
* **Вградени Елементи**: HTML позволява вграждането на изображения, видео, аудио, и други мултимедийни елементи в документите.


### CSS


#### Описание и Обяснение

CSS (Cascading Style Sheets) е език за описание на визуалното представяне на HTML документите. Той определя как визуалните и аспектните елементи на уеб страницата трябва да бъдат показани на екрана, в принтера, или в други медии. CSS позволява на разработчиците да контролират цветовете, шрифтовете, разстоянията, позиционирането, анимациите и много други аспекти на уеб елементите, като по този начин разделят съдържанието от представянето.


#### Основни Характеристики



* **Селектори**: CSS използва селектори за идентифициране на елементите в HTML документа, към които да приложи стиловете. Селекторите могат да бъдат базирани на имена на тагове, класове, идентификатори и др.
* **Свойства и Стойности**: Стиловете в CSS се определят чрез парове свойство-стойност, като например `color: red;` или `font-size: 14px;`.
* **Каскадиране и Наследяване**: CSS следва принципи на каскадиране и наследяване, което позволява стиловете да се прилагат и комбинират по ефективен начин, като се отчитат специфични правила за приоритет и наследяване.


#### Предимства на използването на HTML и CSS заедно



1. **Пълна Контрол над Визуалното Представяне**: Използването на HTML за структура и CSS за стил позволява разработчиците да имат пълен контрол над визуалния аспект на уеб страниците.
2. **Подобрена Достъпност и Съвместимост**: Коректно структурираните HTML документи, стилизирани с CSS, са по-достъпни за различни устройства и браузъри.
3. **Оптимизация за Потребителско Изживяване**: Позволява създаването на адаптивен и отзивчив дизайн, който се адаптира към различни размери на екрана и устройства, подобрявайки потребителското изживяване.
4. **Ефективност и Поддръжка**: Разделянето на съдържание (HTML) и представяне (CSS) прави уеб сайтовете по-лесни за поддръжка и актуализация.
3. Практическа част


### Разработка на Уеб Сайт за Инфлуенсър със Здравословни Рецепти

В тази част от документацията ще разгледаме практическите аспекти на разработката на уеб сайта за инфлуенсър, специализиран в здравословното хранене. Ще обсъдим ключовите функционалности, специфични логически операции и технологични решения, използвани при създаването на сайта.


```
Структура на Файловете и Компонентите
Въвеждайки структурата на приложението, разглеждаме основните компоненти, които формират двата слоя на MVC уеб проекта и инфраструктурата, като се фокусираме върху най-важните части.
Areas
Структурата на Areas е разделена на три основни секции, които отговарят на различни роли и функционалности в приложението:
Administrator
Follower
Home
Infrastructure
Слойът на инфраструктурата включва следните ключови компоненти:
Extensions
ApplicationBuilderExtensions.cs: Съдържа методи за разширяване, които конфигурират приложението по време на стартиране.
ServiceCollectionExtensions.cs: Дефинира разширения за добавяне на услуги към контейнера на зависимости, улесняващи конфигурацията и инжектирането на зависимости.
Mapping
Mapping profiles: Съдържа профили за AutoMapper, които определят правилата за мапинг между различни модели и DTOs, улесняващи преобразуването на данни между слоевете на приложението.
Middlewares
DatabaseMiddleware.cs: Изпълнява автоматични миграции на базата данни при стартиране на приложението и включва политика за повторен опит при неуспешни миграции.

```




1. **Services**
    * **ImageWebSearch/GoogleImageSearchService.cs**: Реализира услуга за търсене на изображения чрез  Google Search API, използвана за добавяне на снимки към рецептите.


#### wwwroot



* **js folder**: Съдържа JavaScript файловете, отговорни за клиентските интеракции с използване на Ajax и jQuery. Тези скриптове улесняват динамичното зареждане на съдържание, асинхронни заявки към сървъра и подобряват потребителското изживяване чрез плавни интеракции без презареждане на страницата.

Тази структура предоставя добре организирана основа за разработката на многофункционален уеб сайт, като поддържа модуларност и улеснява мащабирането, поддръжката и разширението на функционалностите на приложението.


### Описание на услугите в приложението:

Описание на по-комплексните логически компоненти.


#### AccountService

`AccountService` предоставя ключови функции за управление на акаунти на потребителите, като промяна на парола, изтриване на потребител и редактиране на профил.


#### UploadImage

Класът `UploadImage` съдържа статичен метод `ToImgur`, който е предназначен за качване на изображения в Imgur чрез техния API. Този метод предоставя лесен начин за интеграция с Imgur, което е полезно за приложения, които трябва да съхраняват изображения външно и да споделят връзки към тях.


#### GoogleImageSearchService

`GoogleImageSearchService` предоставя функционалност за извършване на търсене на изображения чрез Google Custom Search API и е реализация на интерфейса `ISearchService`. Той използва `HttpClient` за изпращане на заявки към API-то и `IConfiguration` за достъп до конфигурационни настройки.


#### Конструктор:



* Приема `IConfiguration` обект, който се използва за достъп до конфигурационни стойности, необходими за извършване на търсенето, като API ключа и ID на търсачката.


#### Методи:



* `ImageUrlByName(string searchQuery)`: Асинхронен метод, който извършва търсене на изображение в Google по зададен текст за търсене. Връща URL на първото намерено изображение като резултат.


#### Процес на изпълнение:



1. **Конфигурация на Заявката**: Използва конфигурационни данни за изграждане на URI за заявката към Google Custom Search API. Тези данни включват базовия URL на API-то, Search Engine ID и API ключа.
2. **Изпращане на Заявката**: Извършва HTTP GET заявка към създадения URI.
3. **Обработка на Отговора**: При успешен отговор, съдържанието му се десериализира в обект `GoogleSearchResponse`, който съдържа резултатите от търсенето.
4. **Връщане на Резултата**: Ако има резултати, методът връща URL на първото намерено изображение. В противен случай, хвърля `ArgumentNullException`.


#### Изключения:



* Хвърля `ArgumentNullException`, ако конфигурацията на Google Search API е `null` или ако търсенето не върне резултати.


#### Конфигурация:



* Необходимо е да се конфигурира Google Custom Search API в `appsettings.json` (или друг подходящ конфигурационен файл), включително ключ за API и ID на търсачката, които се използват за авторизация и конфигуриране на търсенето.


#### ExternalRecipeCreationService

**Функционалност:**

Този клас е отговорен за създаването на рецепти от URL адрес на външен сайт (в случая gotvach.bg). Приложението има функционалност, която позволява на потребителите да добавят рецепта директно от външен сайт, без нуждата да въвеждат ръчно информацията за тях **(фиг 3)**. Тази функционалност улеснява запълването на базата данни с рецепти и продукти.

**Методи:**



* **Create(string url):** Асинхронен метод, който приема URL адрес на външен сайт и създава нова рецепта от него.

**Процес на изпълнение:**



1. **Изтегляне на съдържанието:**
    * Използва HttpClient за изтегляне на HTML съдържанието от URL адреса.
2. **Извличане на данни:**
    * Използва регулярни изрази (Regex) за извличане на информация от HTML съдържанието:
        * **Заглавие:** Regex `Title()`
        * **Описание:** Regex `RawDecription()`, `WithoutTags()`, `WithoutSourceLine()` и `CleanText()`
        * **Снимка:** Regex `Image()`
        * **Продукти и количества:** Regex `Products()`
3. **Проверка на данни:**
    * Проверява валидността на извлечените данни.
4. **Създаване на нова рецепта:**
    * Създава нова рецепта с извлечените данни.
5. **Създаване на продукти:**
    * За всеки продукт в рецептата:
        * **Проверка:** Проверява дали продуктът вече съществува в базата данни.
        * **Създаване:**
            * Ако не съществува, създава нов продукт.
            * Използва името на продукта и Regex за извличане на URL адрес на изображение.
            * **Забележка:** gotvach.bg не предоставя изображения за продуктите.
            * За да се генерират изображения, методът използва:
                * [GoogleImageSearchService](#googleimagesearchservice-23)
        * **Свързване:** Свързва продукта с рецептата.
6. **Записване в базата данни:**
    * Записва новата рецепта и продуктите в базата данни.

**Връщане на резултата:**



* Връща ID-то на новата рецепта.


### Структура на базата данни



<p id="gdcalert1" ><span style="color: red; font-weight: bold">>>>>>  gd2md-html alert: inline image link here (to images/image1.png). Store image on your image server and adjust path/filename/extension if necessary. </span><br>(<a href="#">Back to top</a>)(<a href="#gdcalert2">Next alert</a>)<br><span style="color: red; font-weight: bold">>>>>> </span></p>


![alt_text](images/image1.png "image_tooltip")


Базата данни на уебсайта за рецепти е създадена да поддържа взаимодействието между потребителите, техните рецепти и продуктите, използвани в тях. Структурата отразява отношенията между различните сущности и техните атрибути.


##### **Таблици и Отношения**



1. **ProductsRecipes (ПродуктиРецепти)**
    * Представлява връзката между продуктите и рецептите, дефинира кои продукти и в какви количества са използвани във всяка рецепта.
2. **Products (Продукти)**
    * Съдържа информация за отделните продукти, техните калории и снимка.
3. **Recipes (Рецепти)**
    * Включва детайли за самите рецепти, като име, описание, публикуващ потребител, хранителна стойност, дата на публикуване, снимка, категория и общ брой калории.
4. **AspNetUsers (Потребители)**
    * Стандартна таблица за управление на потребители в ASP.NET, която е разширена с допълнителни полета за име, фамилия и снимка.
5. **Comments (Коментари)**
    * Съхранява коментарите, които потребителите оставят за рецепти, включително рейтинг и дата на публикуване.
6. **AspNetUserRoles (Роли на Потребители) и AspNetRoles (Роли)**
    * Дефинират ролите на потребителите в системата и връзката между потребителите и техните роли.
7. **AspNetUserClaims (Права на Потребители) и AspNetRoleClaims (Права на Роли)**
    * Определят специфични права и привилегии, свързани с потребителите и техните роли.


#### Специфични Логически Операции



1. **Миграция и Синхронизация**
    * Използване на Entity Framework Core за синхронизация на моделите с базата данни и управление на миграциите.
2. **Управление на Достъпа**
    * Авторизация и аутентификация на потребители, използващи AspNet Identity системата за управление на роли и права.
3. **Валидация на Данните**
    * Входящите данни за продукти и рецепти се валидират за тип и формат преди да бъдат записани в базата данни.
4. **Операции с Рецепти**
    * Потребителите могат да създават, редактират и трият свои рецепти, като системата управлява свързаните с тях продукти и калории.
5. **Коментари и Рейтинг**
    * **Добавяне на Коментар**: Потребителите могат да добавят коментари към рецепти с опция за рейтинг.
    * **Изтриване на Коментар**: Потребителите могат да изтриват собствените си коментари, докато администраторите могат да управляват всички коментари.
    * **Рейтинг Система**: Рейтингът се пресмята като средна стойност от всички оценки, дадени от потребителите за рецепта.



4. 
Заключение
